
{% extends "dwp-layout.html" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% import "includes/templates/header/macro.html" as header%}

{% block head %}
  {% include "includes/head.html" %}
  <link href="/public/stylesheets/custom.css" media="all" rel="stylesheet" type="text/css" />
{% endblock %}

{% block pageTitle %}
  Home â€“ Prepare an appeal response
{% endblock %}

{% block header %}
{{header.header(serviceName,'Jane Doe')}}
{% endblock %}

{% block content %}
<a href="javascript:history.back()" class="govuk-back-link">Back</a>

  <div class="govuk-grid-row govuk-!-margin-bottom-7">
    <div class="govuk-grid-column-two-thirds">
      <h2 class="govuk-heading-l">Add the decision dates</h2>
      </div>
    </div>
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">

        <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" role="group" aria-describedby="date-original-decision-hint">
              <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h3 class="govuk-heading-m">
                  Original decision sent to appellant
                </h3>
              </legend>
              <div class="govuk-date-input" id="date-original-decision">
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="date-original-decision-day">
                      Day
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="date-original-decision-day" name="date-original-decision-day" type="text" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="date-original-decision-month">
                      Month
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="date-original-decision-month" name="date-original-decision-month" type="text" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="date-original-decision-year">
                      Year
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="date-original-decision-year" name="date-original-decision-year" type="text" inputmode="numeric">
                  </div>
                </div>
              </div>
            </fieldset>
          </div>

          <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" role="group" aria-describedby="mr-hint">
              <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h3 class="govuk-heading-m">
                  MR requested by appellant
                </h3>
              </legend>
              <div class="govuk-date-input" id="mr">
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="mr-day">
                      Day
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="mr-day" name="mr-day" type="text" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="mr-month">
                      Month
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="mr-month" name="mr-month" type="text" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="mr-year">
                      Year
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="mr-year" name="mr-year" type="text" inputmode="numeric">
                  </div>
                </div>
              </div>
            </fieldset>
          </div>

          <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" role="group" aria-describedby="mrn-sent-hint">
              <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h1 class="govuk-heading-m">
                  MRN sent to appellant
                </h1>
              </legend>
              <div class="govuk-date-input" id="mrn-sent">
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="mrn-sent-day">
                      Day
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="mrn-sent-day" name="mrn-sent-day" type="text" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="mrn-sent-month">
                      Month
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="mrn-sent-month" name="mrn-sent-month" type="text" inputmode="numeric">
                  </div>
                </div>
                <div class="govuk-date-input__item">
                  <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="mrn-sent-year">
                      Year
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="mrn-sent-year" name="mrn-sent-year" type="text" inputmode="numeric">
                  </div>
                </div>
              </div>
            </fieldset>
          </div>

        <button class="govuk-button" data-module="govuk-button" onclick="saveData()">
          Continue
        </button>
        <p><a href="javascript:history.back()">Back</a></p>

    </div>
  </div>

{% endblock %}

{% block pageScripts %}
<script type="text/javascript">

  window.addEventListener('load', (event) => {
    document.getElementById('date-original-decision-day').value = sessionStorage.getItem("date-original-decision-day");
    document.getElementById('date-original-decision-month').value = sessionStorage.getItem("date-original-decision-month");
    document.getElementById('date-original-decision-year').value = sessionStorage.getItem("date-original-decision-year");
    document.getElementById('mr-day').value = sessionStorage.getItem("mr-day");
    document.getElementById('mr-month').value = sessionStorage.getItem("mr-month");
    document.getElementById('mr-year').value = sessionStorage.getItem("mr-month");
    document.getElementById('mrn-sent-day').value = sessionStorage.getItem("mrn-sent-day");
    document.getElementById('mrn-sent-month').value = sessionStorage.getItem("mrn-sent-day");
    document.getElementById('mrn-sent-year').value = sessionStorage.getItem("mrn-sent-day");
  });


  function saveData(){
    sessionStorage.setItem("date-original-decision-day",document.getElementById('date-original-decision-day').value);
    sessionStorage.setItem("date-original-decision-month",document.getElementById('date-original-decision-month').value);
    sessionStorage.setItem("date-original-decision-year",document.getElementById('date-original-decision-year').value);

    sessionStorage.setItem("mr-day",document.getElementById('mr-day').value);
    sessionStorage.setItem("mr-month",document.getElementById('mr-month').value);
    sessionStorage.setItem("mr-year",document.getElementById('mr-year').value);

    sessionStorage.setItem("mrn-sent-day",document.getElementById('mrn-sent-day').value);
    sessionStorage.setItem("mrn-sent-month",document.getElementById('mrn-sent-month').value);
    sessionStorage.setItem("mrn-sent-year",document.getElementById('mrn-sent-year').value);

    if(
      document.getElementById('date-original-decision-day').value
      && document.getElementById('date-original-decision-month').value
      && document.getElementById('date-original-decision-year').value
      && document.getElementById('mr-day').value
      && document.getElementById('mr-month').value
      && document.getElementById('mr-year').value
      && document.getElementById('mrn-sent-day').value
      && document.getElementById('mrn-sent-month').value
      && document.getElementById('mrn-sent-year').value
    )
    {
      sessionStorage.setItem("taskProgressDecisionDates","2");
    }
    else if(
      document.getElementById('date-original-decision-day').value
      || document.getElementById('date-original-decision-month').value
      || document.getElementById('date-original-decision-year').value
      || document.getElementById('mr-day').value
      || document.getElementById('mr-month').value
      || document.getElementById('mr-year').value
      || document.getElementById('mrn-sent-day').value
      || document.getElementById('mrn-sent-month').value
      || document.getElementById('mrn-sent-year').value
    )
    {
      sessionStorage.setItem("taskProgressDecisionDates","1");
    }
    else
    {
      sessionStorage.setItem("taskProgressDecisionDates","0");
    }
    window.location.href = "01-task-list-new";
  }
</script>
{% endblock %}

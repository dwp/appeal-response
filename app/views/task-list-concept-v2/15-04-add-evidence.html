
{% extends "dwp-layout.html" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% import "includes/templates/header/macro.html" as header%}

{% block head %}
  {% include "includes/head.html" %}
  <link href="/public/stylesheets/custom.css" media="all" rel="stylesheet" type="text/css" />
{% endblock %}

{% block pageTitle %}
  Home â€“ Prepare an appeal response
{% endblock %}

{% block header %}
{{header.header(serviceName,'Jacob Abraham')}}
{% endblock %}

{% block content %}
<a href="15-response" class="govuk-back-link">Back to grounds of appeal</a>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-l">Respond to appellant's points</h1>
        <h2 class="govuk-heading-m">Appellant's point</h2>
        <h3 class="govuk-heading-s" id="groundTitle"></h3>
        <p id="groundDesc"></p>

        <h2 class="govuk-heading-m">Evidence</h2>
        <div class="govuk-form-group">
          <h1 class="govuk-label-wrapper"><label class="govuk-label govuk-label--s" for="event-name">
              What is the evidence supporting this decision?
            </label>
          </h1>
          <div id="event-name-hint" class="govuk-hint">
            The evidence from the bundle
          </div>
          <input class="govuk-input" id="evidenceTitle" name="event-name" type="text" aria-describedby="event-name-hint">
        </div>

        <div class="govuk-form-group">
          <h1 class="govuk-label-wrapper"><label class="govuk-label govuk-label--s" for="event-name">
              Starting page number in the bundle
            </label>
          </h1>
          <input class="govuk-input govuk-!-width-one-quarter" id="evidenceStart" name="event-name" type="text" aria-describedby="event-name-hint">
        </div>

        <div class="govuk-form-group">
          <h1 class="govuk-label-wrapper"><label class="govuk-label govuk-label--s" for="event-name">
              Ending page number in the bundle
            </label>
          </h1>
          <input class="govuk-input govuk-!-width-one-quarter" id="evidenceEnd" name="event-name" type="text" aria-describedby="event-name-hint">
        </div>

        <div class="govuk-button-group">
          <a class="govuk-button" onclick="saveData()">
            Continue
          </a>
        </div>
        <p><a href="15-response">Back to grounds of appeal</a></p>
    </div>
  </div>
{% endblock %}

{% block pageScripts %}
<script type="text/javascript">
  window.addEventListener('load', (event) => {
    let index = 0;
    var grounds = [""];

    if(sessionStorage.getItem("groundIndex")){
      index = sessionStorage.getItem("groundIndex");
    }
    if(sessionStorage.getItem("grounds")){
      ground = sessionStorage.getItem("grounds").split("#")[index];
      groundTitle = sessionStorage.getItem("groundsTitles").split("#")[index];
      document.getElementById('groundTitle').innerHTML = groundTitle;
      document.getElementById('groundDesc').innerHTML = ground;
    }
    if(sessionStorage.getItem("dwpEvidenceTitle")){
      document.getElementById('evidenceTitle').value = sessionStorage.getItem("dwpEvidenceTitle").split("#")[index];
    }
    if(sessionStorage.getItem("dwpEvidenceStart")){
      document.getElementById('evidenceStart').value = sessionStorage.getItem("dwpEvidenceStart").split("#")[index];
    }
    if(sessionStorage.getItem("dwpEvidenceEnd")){
      document.getElementById('evidenceEnd').value = sessionStorage.getItem("dwpEvidenceEnd").split("#")[index];
    }
  });

  function saveData(){
    var dwpEvidenceTitle = "";
    var dwpEvidenceStart = "";
    var dwpEvidenceEnd = "";

    if(sessionStorage.getItem("dwpEvidenceTitle")){
      dwpEvidenceTitle = sessionStorage.getItem("dwpEvidenceTitle");
    }
    dwpEvidenceTitle += document.getElementById('evidenceTitle').value + "#";
    sessionStorage.setItem("dwpEvidenceTitle",dwpEvidenceTitle);

    if(sessionStorage.getItem("dwpEvidenceStart")){
      dwpEvidenceStart = sessionStorage.getItem("dwpEvidenceStart");
    }
    dwpEvidenceStart += document.getElementById('evidenceStart').value + "#";
    sessionStorage.setItem("dwpEvidenceStart",dwpEvidenceStart);

    if(sessionStorage.getItem("dwpEvidenceEnd")){
      dwpEvidenceEnd = sessionStorage.getItem("dwpEvidenceEnd");
    }
    dwpEvidenceEnd += document.getElementById('evidenceEnd').value + "#";
    sessionStorage.setItem("dwpEvidenceEnd",dwpEvidenceEnd);


    /* Need to figure this out soon */
    sessionStorage.setItem("dwpResponseComplete","1");

    window.location.href = "15-05-response-preview";
  }

</script>
{% endblock %}
